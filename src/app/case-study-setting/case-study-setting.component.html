<div class="feature-settings-container">
    <h2>Case Study Page Management</h2>
    <p>Manage and update the case studies displayed on the website.</p>

    <div *ngFor="let caseStudy of caseStudies" class="feature-item">
        <div class="row">
            <span class="title">Title</span>
            <ng-container
                *ngIf="editingCaseStudy?.id === caseStudy.id; else showTitle">
                <input [(ngModel)]="editableTitle" />
                <button class="edit-btn"
                    (click)="saveEdit(caseStudy)">Update</button>
            </ng-container>
            <ng-template #showTitle>
                <span class="text">{{ caseStudy.title }}</span>
                <button class="edit-btn"
                    (click)="editCaseStudy(caseStudy)">Edit</button>
            </ng-template>
        </div>
    </div>

      <div class="header-with-btn">
        <h2>Case Study Page Management</h2>
        <button class="add-btn" (click)="openCreateModal()">+ Add New Case Study</button>
    </div>

    <hr />

    <h2>Uploaded Case Study Images</h2>
    <div class="image-gallery">
        <div class="image-card" *ngFor="let image of caseStudyImages">
            <img [src]="baseUrl + image.image_url" alt="Case Study Image"
                class="feature-icon" />

            <div class="input-group">
                <label>Title:</label>
                <input [(ngModel)]="image.title" />
            </div>
            <div class="input-group">
                <label>Sub Title:</label>
                <textarea [(ngModel)]="image.subTitle"></textarea>
            </div>
            <div class="input-group">
                <label>Paragraph:</label>
                <textarea [(ngModel)]="image.paragraph"></textarea>
            </div>

            <input type="file" (change)="onFileSelected($event, image.id)" />
            <button class="edit-btn"
                (click)="updateImage(image.id)">Update</button>
        </div>
    </div>

</div>


<!-- POPUP MODAL -->
<div class="modal-overlay" *ngIf="isModalOpen" (click)="closeModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
        <h3>Add New Case Study</h3>
        
        <div class="input-group">
            <label>Title</label>
            <input type="text" [(ngModel)]="newCaseStudy.title" placeholder="Enter title">
        </div>

        <div class="input-group">
            <label>Sub Title</label>
            <textarea [(ngModel)]="newCaseStudy.subTitle" placeholder="Enter brief subtitle"></textarea>
        </div>

        <div class="input-group">
            <label>Paragraph</label>
            <!-- Added class here -->
            <textarea class="paragraph-area" [(ngModel)]="newCaseStudy.paragraph" placeholder="Enter description"></textarea>
        </div>

        <div class="input-group">
            <label>Upload Image</label>
            <input type="file" (change)="onNewFileSelected($event)">
        </div>

        <div class="modal-actions">
            <button class="cancel-btn" (click)="closeModal()">Cancel</button>
            <button class="save-btn" (click)="createCaseStudy()">Save Case Study</button>
        </div>
    </div>
</div>
